<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ø–æ–¥–±–æ—Ä –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –∏–≥—Ä</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    select, input, button {
      display: block;
      margin: 8px 0;
      padding: 6px;
      width: 250px;
    }

    button {
      cursor: pointer;
    }

    .game {
      margin: 6px 0;
    }
  </style>
</head>
<body>

<h1>üé≤ –ø–æ–¥–±–æ—Ä –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –∏–≥—Ä</h1>

<select id="genre">
  <option value="">–ª—é–±–æ–π –∂–∞–Ω—Ä</option>
  <option value="—Å–µ–º–µ–π–Ω–∞—è">—Å–µ–º–µ–π–Ω–∞—è</option>
  <option value="—Å—Ç—Ä–∞—Ç–µ–≥–∏—è">—Å—Ç—Ä–∞—Ç–µ–≥–∏—è</option>
  <option value="–≤–µ—á–µ—Ä–∏–Ω–æ—á–Ω–∞—è">–≤–µ—á–µ—Ä–∏–Ω–æ—á–Ω–∞—è</option>
  <option value="–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è">–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è</option>
  <option value="–Ω–∞—Å–ª–µ–¥–∏–µ">–Ω–∞—Å–ª–µ–¥–∏–µ</option>
</select>

<select id="difficulty">
  <option value="">–ª—é–±–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å</option>
  <option value="–ª—ë–≥–∫–∞—è">–ª—ë–≥–∫–∞—è</option>
  <option value="—Å—Ä–µ–¥–Ω—è—è">—Å—Ä–µ–¥–Ω—è—è</option>
  <option value="—Å–ª–æ–∂–Ω–∞—è">—Å–ª–æ–∂–Ω–∞—è</option>
</select>

<input id="players" type="number" placeholder="–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤">
<input id="time" type="number" placeholder="–º–∞–∫—Å. –≤—Ä–µ–º—è (–º–∏–Ω)">

<button onclick="filterGames()">–ø–æ–¥–æ–±—Ä–∞—Ç—å –∏–≥—Ä—É</button>

<div id="result"></div>

<script>
const sheetid = "1RynBSu-vpp79TLS35tOIfd_eZhYmAAbc387HGv_PJps";
const sheetname = "–ª–∏—Å—Ç1";

let games = [];

// –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ google sheets
fetch(`https://opensheet.elk.sh/${sheetid}/${sheetname}`)
  .then(response => response.json())
  .then(data => {
    games = data.map(g => ({
      name: g["–Ω–∞–∑–≤–∞–Ω–∏–µ"]?.toString().trim(),
      genre: g["–∂–∞–Ω—Ä"]?.toString().trim().toLowerCase(),
      difficulty: g["—Å–ª–æ–∂–Ω–æ—Å—Ç—å"]?.toString().trim().toLowerCase(),
      players_min: Number(g["–º–∏–Ω–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤"]),
      players_max: Number(g["–º–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤"]),
      time: Number(g["–≤—Ä–µ–º—è –∏–≥—Ä—ã"])
    }));
  });

// —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
function filterGames() {
  const genre = document.getElementById("genre").value.toLowerCase();
  const difficulty = document.getElementById("difficulty").value.toLowerCase();
  const players = Number(document.getElementById("players").value);
  const time = Number(document.getElementById("time").value);

  const result = games.filter(g =>
    (!genre || g.genre === genre) &&
    (!difficulty || g.difficulty === difficulty) &&
    (!players || (players >= g.players_min && players <= g.players_max)) &&
    (!time || g.time <= time)
  );

  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = result.length
    ? result.map(g => `<div class="game">üé≤ ${g.name}</div>`).join("")
    : "<p>–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∏–≥—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>";
}
</script>

</body>
</html>
